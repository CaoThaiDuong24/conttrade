â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ GIáº¢I PHÃP: DEPLOY TOÃ€N Bá»˜ BACKEND VÃ€ Sá»¬A Lá»–I HIá»‚N THá»Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ Váº¤N Äá»€
â”€â”€â”€â”€â”€â”€â”€â”€â”€
Má»™t sá»‘ mÃ n hÃ¬nh hiá»ƒn thá»‹, má»™t sá»‘ mÃ n hÃ¬nh khÃ´ng hiá»ƒn thá»‹ dá»¯ liá»‡u

âœ… GIáº¢I PHÃP ÄÃƒ CHUáº¨N Bá»Š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ÄÃ£ táº¡o 4 scripts tá»± Ä‘á»™ng Ä‘á»ƒ fix táº¥t cáº£ váº¥n Ä‘á»!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ CÃCH Sá»¬ Dá»¤NG NHANH NHáº¤T
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  CHáº Y ONE-CLICK DEPLOY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    cd /home/lta/pj/conttrade
    bash scripts/deployment/one-click-deploy.sh

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Chá»n tá»« menu:                              â”‚
    â”‚                                             â”‚
    â”‚  1) ğŸ”¥ Full Deploy     - Deploy táº¥t cáº£      â”‚
    â”‚  2) ğŸ”§ Backend Only    - Chá»‰ backend        â”‚
    â”‚  3) ğŸ¨ Frontend Only   - Chá»‰ frontend       â”‚
    â”‚  4) ğŸ©¹ Fix Issues      - Sá»­a lá»—i hiá»ƒn thá»‹   â”‚
    â”‚  5) ğŸ” Check Routes    - Kiá»ƒm tra routes    â”‚
    â”‚  6) ğŸ“Š Full Diagnosis  - Cháº©n Ä‘oÃ¡n          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š CÃC SCRIPTS ÄÃƒ Táº O
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Script 1: one-click-deploy.sh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ Vá»‹ trÃ­:  scripts/deployment/one-click-deploy.sh
ğŸ¯ Má»¥c Ä‘Ã­ch: Menu tá»•ng há»£p táº¥t cáº£ cÃ¡c tÃ¡c vá»¥
â±ï¸  Thá»i gian: 1-10 phÃºt tÃ¹y option

    bash scripts/deployment/one-click-deploy.sh


Script 2: full-backend-deploy.sh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ Vá»‹ trÃ­:  scripts/deployment/full-backend-deploy.sh
ğŸ¯ Má»¥c Ä‘Ã­ch: Deploy toÃ n bá»™ backend, Ä‘áº£m báº£o Táº¤T Cáº¢ routes
â±ï¸  Thá»i gian: 5-10 phÃºt

    bash scripts/deployment/full-backend-deploy.sh

    âœ… XÃ³a build cÅ©
    âœ… CÃ i dependencies má»›i
    âœ… Build táº¥t cáº£ routes
    âœ… Verify routes
    âœ… Start PM2
    âœ… Test endpoints


Script 3: fix-display-issues.sh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ Vá»‹ trÃ­:  scripts/deployment/fix-display-issues.sh
ğŸ¯ Má»¥c Ä‘Ã­ch: ChuyÃªn sá»­a lá»—i mÃ n hÃ¬nh khÃ´ng hiá»ƒn thá»‹
â±ï¸  Thá»i gian: 3-5 phÃºt

    bash scripts/deployment/fix-display-issues.sh

    âœ… Check backend running
    âœ… Test database
    âœ… Run migrations
    âœ… Check permissions
    âœ… Seed data (optional)
    âœ… Rebuild & restart


Script 4: check-all-routes.sh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ Vá»‹ trÃ­:  scripts/deployment/check-all-routes.sh
ğŸ¯ Má»¥c Ä‘Ã­ch: Kiá»ƒm tra táº¥t cáº£ routes vÃ  endpoints
â±ï¸  Thá»i gian: 1-2 phÃºt

    bash scripts/deployment/check-all-routes.sh

    âœ… List routes trong source
    âœ… List routes Ä‘Ã£ build
    âœ… List routes Ä‘Ã£ register
    âœ… Test táº¥t cáº£ endpoints
    âœ… Health score (%)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ WORKFLOWS CHO CÃC TÃŒNH HUá»NG
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”´ TÃ¬nh huá»‘ng 1: CÃ³ mÃ n hÃ¬nh khÃ´ng hiá»ƒn thá»‹ dá»¯ liá»‡u
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    # CÃ¡ch 1: DÃ¹ng menu
    bash scripts/deployment/one-click-deploy.sh
    â†’ Chá»n: 4 (Fix Issues)

    # CÃ¡ch 2: Cháº¡y trá»±c tiáº¿p
    bash scripts/deployment/fix-display-issues.sh

    # Náº¿u váº«n chÆ°a fix, rebuild backend
    bash scripts/deployment/full-backend-deploy.sh


ğŸŸ¢ TÃ¬nh huá»‘ng 2: Deploy má»›i hoÃ n toÃ n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    bash scripts/deployment/one-click-deploy.sh
    â†’ Chá»n: 1 (Full Deploy)


ğŸŸ¡ TÃ¬nh huá»‘ng 3: Update code má»›i
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    git pull origin master
    bash scripts/deployment/full-backend-deploy.sh


ğŸ”µ TÃ¬nh huá»‘ng 4: Chá»‰ muá»‘n kiá»ƒm tra
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    bash scripts/deployment/check-all-routes.sh


âšª TÃ¬nh huá»‘ng 5: Cháº©n Ä‘oÃ¡n toÃ n diá»‡n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    bash scripts/deployment/one-click-deploy.sh
    â†’ Chá»n: 6 (Full Diagnosis)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š CÃCH Äá»ŒC Káº¾T QUáº¢
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Khi cháº¡y check-all-routes.sh:

    ğŸ“Š THá»NG KÃŠ ROUTES:
      â€¢ Routes trong source:     27  â† File .ts
      â€¢ Routes Ä‘Ã£ build:         27  â† File .js
      â€¢ Routes Ä‘Ã£ register:      20  â† Trong server.ts

    ğŸ“Š THá»NG KÃŠ ENDPOINTS:
      â€¢ Tá»•ng sá»‘ endpoints:       22
      â€¢ âœ… OK:                   18  â† HTTP 200
      â€¢ ğŸ” Auth required:         3  â† HTTP 401 (bÃ¬nh thÆ°á»ng)
      â€¢ âŒ CÃ³ lá»—i:                1  â† HTTP 404, 500 (Cáº¦N FIX)

    ğŸ¯ TÃŒNH TRáº NG:
      âœ… EXCELLENT: 95% hoáº¡t Ä‘á»™ng tá»‘t

ÄÃ¡nh giÃ¡:
  âœ… EXCELLENT (>90%) = Perfect!
  âš ï¸  GOOD (70-90%)   = OK, cÃ³ vÃ i lá»—i nhá»
  âŒ POOR (<70%)      = Cáº§n rebuild hoáº·c fix

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ› ï¸  TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âŒ Scripts khÃ´ng cháº¡y
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    chmod +x /home/lta/pj/conttrade/scripts/deployment/*.sh

âŒ Backend khÃ´ng start
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    pm2 logs lta-backend --lines 100
    pm2 restart lta-backend

âŒ Database connection failed
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    sudo systemctl status postgresql
    sudo systemctl restart postgresql

âŒ Port already in use
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    sudo lsof -i :3006
    sudo kill -9 <PID>
    pm2 restart lta-backend

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¡ COMMANDS Há»®U ÃCH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Xem logs:
    pm2 logs lta-backend --lines 100
    pm2 logs lta-frontend --lines 100
    pm2 logs                              # Cáº£ hai

Monitor:
    pm2 monit                             # Real-time
    pm2 status                            # Status
    pm2 list                              # List processes

Restart:
    pm2 restart lta-backend               # Backend only
    pm2 restart lta-frontend              # Frontend only
    pm2 restart all                       # Táº¥t cáº£

Test API:
    curl http://localhost:3006/health
    curl http://localhost:3006/api/v1/depots

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“– TÃ€I LIá»†U CHI TIáº¾T
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“„ DEPLOY-FIX-GUIDE.md
    â†’ HÆ°á»›ng dáº«n chi tiáº¿t Ä‘áº§y Ä‘á»§ nháº¥t
    â†’ Giáº£i thÃ­ch tá»«ng script
    â†’ Workflows cho má»i tÃ¬nh huá»‘ng
    â†’ Troubleshooting Ä‘áº§y Ä‘á»§

ğŸ“„ BUILD-AND-DEPLOY.md
    â†’ 3 phÆ°Æ¡ng Ã¡n deploy
    â†’ Build tá»« Windows
    â†’ Deploy tá»« Git

ğŸ“„ DEPLOYMENT.md
    â†’ PM2 deployment
    â†’ Docker deployment
    â†’ Nginx setup

ğŸ“„ scripts/deployment/README.md
    â†’ TÃ³m táº¯t cÃ¡c scripts
    â†’ Quick reference

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‰ TÃ“M Táº®T
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ÄÃ£ táº¡o 4 scripts tá»± Ä‘á»™ng
âœ… Menu one-click dá»… dÃ¹ng
âœ… Fix lá»—i hiá»ƒn thá»‹ tá»± Ä‘á»™ng
âœ… Kiá»ƒm tra routes chi tiáº¿t
âœ… Documentation Ä‘áº§y Ä‘á»§

KHÃ”NG CÃ’N LO Vá»€ MÃ€N HÃŒNH KHÃ”NG HIá»‚N THá»Š! ğŸš€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ Há»– TRá»¢
â”€â”€â”€â”€â”€â”€â”€â”€â”€
Náº¿u gáº·p váº¥n Ä‘á», cháº¡y full diagnosis:

    bash scripts/deployment/one-click-deploy.sh
    â†’ Chá»n: 6

Sau Ä‘Ã³ gá»­i output Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Version: 1.0.0
Date: November 3, 2025
Team: LTA Development

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
