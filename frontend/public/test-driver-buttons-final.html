<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Driver.js Buttons - Final Debug</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.3.6/dist/driver.css" />
  <script src="https://cdn.jsdelivr.net/npm/driver.js@1.3.6/dist/driver.js.iife.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 50px;
      background: #f5f5f5;
    }
    
    .test-element {
      padding: 30px;
      margin: 30px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    button {
      padding: 12px 24px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
    }
    
    button:hover {
      background: #45a049;
    }
    
    .debug-log {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #333;
      color: #0f0;
      padding: 15px;
      font-family: monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      border-top: 2px solid #0f0;
    }
    
    .debug-log div {
      margin: 2px 0;
    }
    
    .debug-log .error {
      color: #f00;
    }
    
    .debug-log .success {
      color: #0f0;
    }
    
    .debug-log .info {
      color: #ff0;
    }
  </style>
</head>
<body>
  <h1>Test Driver.js Button Click - Final Debug</h1>
  
  <button id="start-basic-tour">Start Basic Tour (Default Config)</button>
  <button id="start-no-smooth-tour">Start Tour (No Smooth Scroll)</button>
  <button id="start-minimal-tour">Start Minimal Tour (Absolute Basic)</button>
  <button onclick="clearLog()">Clear Log</button>
  
  <div class="test-element" id="element1">
    <h2>Test Element 1</h2>
    <p>This is the first test element for the tour.</p>
  </div>
  
  <div class="test-element" id="element2">
    <h2>Test Element 2</h2>
    <p>This is the second test element for the tour.</p>
  </div>
  
  <div class="test-element" id="element3">
    <h2>Test Element 3</h2>
    <p>This is the third test element for the tour.</p>
  </div>
  
  <div class="debug-log" id="debugLog">
    <div class="info">Debug Log (Check button clicks here):</div>
  </div>
  
  <script>
    function log(message, type = 'info') {
      const logDiv = document.getElementById('debugLog');
      const entry = document.createElement('div');
      entry.className = type;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logDiv.appendChild(entry);
      logDiv.scrollTop = logDiv.scrollHeight;
      console.log(message);
    }
    
    function clearLog() {
      const logDiv = document.getElementById('debugLog');
      logDiv.innerHTML = '<div class="info">Debug Log (Check button clicks here):</div>';
    }
    
    // Test 1: Basic tour with all default config
    document.getElementById('start-basic-tour').addEventListener('click', () => {
      log('Starting basic tour...', 'info');
      
      const driver = window.driver({
        showButtons: ['next', 'previous', 'close'],
        allowClose: true,
        smoothScroll: true,
        showProgress: true,
        progressText: '{{current}} tr√™n {{total}}',
        nextBtnText: 'Ti·∫øp ‚Üí',
        prevBtnText: '‚Üê Tr∆∞·ªõc',
        doneBtnText: '‚úì Ho√†n Th√†nh',
        
        onNextClick: () => {
          log('‚úÖ NEXT button clicked!', 'success');
          driver.moveNext();
        },
        
        onPrevClick: () => {
          log('‚úÖ PREV button clicked!', 'success');
          driver.movePrevious();
        },
        
        onCloseClick: () => {
          log('‚úÖ CLOSE button (X) clicked!', 'success');
          driver.destroy();
        },
        
        onDestroyStarted: () => {
          log('Tour destroyed', 'info');
        },
        
        onHighlightStarted: (element, step, options) => {
          log(`Highlighting step ${step.popover?.title || 'unknown'}`, 'info');
        }
      });
      
      driver.setSteps([
        {
          popover: {
            title: 'üëã Ch√†o m·ª´ng',
            description: 'Click "Ti·∫øp" ƒë·ªÉ b·∫Øt ƒë·∫ßu tour',
          }
        },
        {
          element: '#element1',
          popover: {
            title: 'B∆∞·ªõc 1',
            description: 'ƒê√¢y l√† ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n',
            side: 'bottom',
            align: 'start'
          }
        },
        {
          element: '#element2',
          popover: {
            title: 'B∆∞·ªõc 2',
            description: 'ƒê√¢y l√† ph·∫ßn t·ª≠ th·ª© hai',
            side: 'left',
            align: 'start'
          }
        },
        {
          element: '#element3',
          popover: {
            title: 'B∆∞·ªõc 3',
            description: 'ƒê√¢y l√† ph·∫ßn t·ª≠ cu·ªëi c√πng',
            side: 'top',
            align: 'center'
          }
        }
      ]);
      
      driver.drive();
      log('Basic tour started', 'success');
    });
    
    // Test 2: No smooth scroll
    document.getElementById('start-no-smooth-tour').addEventListener('click', () => {
      log('Starting tour without smooth scroll...', 'info');
      
      const driver = window.driver({
        showButtons: ['next', 'previous', 'close'],
        allowClose: true,
        smoothScroll: false, // DISABLED
        showProgress: true,
        
        onNextClick: () => {
          log('‚úÖ NEXT clicked (no smooth)', 'success');
          driver.moveNext();
        },
        
        onPrevClick: () => {
          log('‚úÖ PREV clicked (no smooth)', 'success');
          driver.movePrevious();
        },
        
        onCloseClick: () => {
          log('‚úÖ CLOSE clicked (no smooth)', 'success');
          driver.destroy();
        }
      });
      
      driver.setSteps([
        {
          popover: {
            title: 'Tour Without Smooth Scroll',
            description: 'Test if smooth scroll causes issues',
          }
        },
        {
          element: '#element1',
          popover: {
            title: 'Step 1',
            description: 'No smooth scrolling',
            side: 'bottom'
          }
        },
        {
          element: '#element2',
          popover: {
            title: 'Step 2',
            description: 'No smooth scrolling',
            side: 'left'
          }
        }
      ]);
      
      driver.drive();
      log('No-smooth tour started', 'success');
    });
    
    // Test 3: Absolute minimal config
    document.getElementById('start-minimal-tour').addEventListener('click', () => {
      log('Starting absolutely minimal tour...', 'info');
      
      const driver = window.driver({
        onNextClick: (element, step, options) => {
          log('‚úÖ MINIMAL: NEXT clicked', 'success');
          driver.moveNext();
        },
        
        onPrevClick: () => {
          log('‚úÖ MINIMAL: PREV clicked', 'success');
          driver.movePrevious();
        },
        
        onCloseClick: () => {
          log('‚úÖ MINIMAL: CLOSE clicked', 'success');
          driver.destroy();
        }
      });
      
      driver.setSteps([
        {
          popover: {
            title: 'Minimal',
            description: 'Minimal config test',
          }
        },
        {
          element: '#element1',
          popover: {
            title: 'Step 1',
            description: 'Minimal',
          }
        }
      ]);
      
      driver.drive();
      log('Minimal tour started', 'success');
    });
    
    // Monitor all clicks on the page
    document.addEventListener('click', (e) => {
      const target = e.target;
      const classes = target.className || '';
      
      if (classes.includes('driver-popover')) {
        log(`Click on: ${classes}`, 'info');
      }
      
      if (classes.includes('driver-popover-close-btn')) {
        log('‚ö†Ô∏è Close button element clicked (before preventDefault)', 'info');
      }
      
      if (classes.includes('driver-popover-next-btn')) {
        log('‚ö†Ô∏è Next button element clicked (before preventDefault)', 'info');
      }
      
      if (classes.includes('driver-popover-prev-btn')) {
        log('‚ö†Ô∏è Prev button element clicked (before preventDefault)', 'info');
      }
    }, true); // Capture phase
    
    log('Test page loaded. Click any Start button to begin.', 'success');
  </script>
</body>
</html>
